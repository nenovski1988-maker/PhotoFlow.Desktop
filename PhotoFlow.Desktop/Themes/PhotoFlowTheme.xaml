<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ===== Base palette (from MainWindow) ===== -->
    <SolidColorBrush x:Key="CardBg" Color="#151922"/>
    <SolidColorBrush x:Key="CardBorder" Color="#262C3A"/>
    <SolidColorBrush x:Key="TextPrimary" Color="#E8EDF7"/>
    <SolidColorBrush x:Key="TextMuted" Color="#9AA6BD"/>
    <SolidColorBrush x:Key="Accent" Color="#34D399"/>
    <SolidColorBrush x:Key="AppBg" Color="Black"/>

    <!-- ===== Common gradients used in MainWindow ===== -->
    <!-- ===== Common gradients used in MainWindow (UNIFIED DIRECTION: top -> bottom) ===== -->
    <!-- Rule: accent/green at Offset="0" (TOP), black at Offset="1" (BOTTOM) -->

    <LinearGradientBrush x:Key="GreenCardBg"
                     StartPoint="0.5,0" EndPoint="0.5,1">
        <GradientStop Color="#FF123011" Offset="0"/>
        <GradientStop Color="Black" Offset="1"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="GreenCardBorder"
                     StartPoint="0.5,0" EndPoint="0.5,1">
        <GradientStop Color="#FF17872E" Offset="0"/>
        <GradientStop Color="Black" Offset="1"/>
    </LinearGradientBrush>

    <!-- FIXED: was reversed -->
    <LinearGradientBrush x:Key="GreenCardBorderStrong"
                     StartPoint="0.5,0" EndPoint="0.5,1">
        <GradientStop Color="#FF129830" Offset="0"/>
        <GradientStop Color="Black" Offset="1"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="GreenInputBorder"
                     StartPoint="0.5,0" EndPoint="0.5,1">
        <GradientStop Color="#FF155323" Offset="0"/>
        <GradientStop Color="Black" Offset="1"/>
    </LinearGradientBrush>

    <!-- FIXED: was reversed -->
    <LinearGradientBrush x:Key="GreenListBorder"
                     StartPoint="0.5,0" EndPoint="0.5,1">
        <GradientStop Color="#FF3D7A4F" Offset="0"/>
        <GradientStop Color="Black" Offset="1"/>
    </LinearGradientBrush>

    <!-- FIXED: make buttons match same direction as cards -->
    <LinearGradientBrush x:Key="AccentButtonBg"
                     StartPoint="0.5,0" EndPoint="0.5,1">
        <GradientStop Color="#FF0B583F" Offset="0"/>
        <GradientStop Color="Black" Offset="1"/>
    </LinearGradientBrush>


    <!-- ===== Default window look ===== -->
    <Style TargetType="{x:Type Window}">
        <Setter Property="Background" Value="Black"/>
        <Setter Property="BorderBrush" Value="#FF1F714B"/>
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
    </Style>

    <!-- ===== Text ===== -->
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
    </Style>

    <!-- Muted helper -->
    <Style x:Key="MutedText" TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="{StaticResource TextMuted}"/>
    </Style>

    <!-- ===== Base Card ===== -->
    <Style x:Key="Card" TargetType="{x:Type Border}">
        <Setter Property="Background" Value="{StaticResource CardBg}"/>
        <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="CornerRadius" Value="14"/>
        <Setter Property="Padding" Value="14"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
    </Style>

    <!-- MainWindow green-ish card (the one you actually use everywhere) -->
    <Style x:Key="GreenCard" TargetType="{x:Type Border}" BasedOn="{StaticResource Card}">
        <Setter Property="Background" Value="{StaticResource GreenCardBg}"/>
        <Setter Property="BorderBrush" Value="{StaticResource GreenCardBorder}"/>
    </Style>

    <!-- Stronger border variant (for log etc.) -->
    <Style x:Key="GreenCardStrongBorder" TargetType="{x:Type Border}" BasedOn="{StaticResource GreenCard}">
        <Setter Property="BorderBrush" Value="{StaticResource GreenCardBorderStrong}"/>
    </Style>

    <!-- ===== Buttons (MainWindow default) ===== -->
    <Style TargetType="{x:Type Button}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        <Setter Property="Background" Value="#1B2130"/>
        <Setter Property="BorderBrush" Value="#2A3246"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="10,6"/>
        <Setter Property="Height" Value="34"/>
        <Setter Property="Cursor" Value="Hand"/>
    </Style>

    <!-- Accent button like "Folders" / "Reset to defaults" -->
    <Style x:Key="AccentButton" TargetType="{x:Type Button}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        <Setter Property="Background" Value="{StaticResource AccentButtonBg}"/>
        <Setter Property="BorderBrush" Value="#2A3246"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="10,6"/>
        <Setter Property="Height" Value="34"/>
        <Setter Property="Cursor" Value="Hand"/>
    </Style>

    <!-- ===== TextBox defaults ===== -->
    <Style TargetType="{x:Type TextBox}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        <Setter Property="Background" Value="#0F131C"/>
        <Setter Property="BorderBrush" Value="#2A3246"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="10,6"/>
        <Setter Property="Height" Value="34"/>
    </Style>

    <!-- MainWindow input style (dark field + green gradient border + background #FF222E2F) -->
    <Style x:Key="GreenInput" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
        <Setter Property="Background" Value="#FF222E2F"/>
        <Setter Property="BorderBrush" Value="{StaticResource GreenInputBorder}"/>
    </Style>

    <!-- ===== ComboBox defaults ===== -->
    <Style TargetType="{x:Type ComboBox}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        <Setter Property="Background" Value="#0F131C"/>
        <Setter Property="BorderBrush" Value="#2A3246"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="10,4"/>
        <Setter Property="Height" Value="34"/>
    </Style>
    <!-- ===== ComboBox (green, readable) ===== -->

    <Style x:Key="GreenComboItem" TargetType="{x:Type ComboBoxItem}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Padding" Value="10,6"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                    <Border x:Name="Bd"
                        Background="{TemplateBinding Background}"
                        CornerRadius="8"
                        Padding="{TemplateBinding Padding}">
                        <ContentPresenter/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsHighlighted" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="#2534D399"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="#4034D399"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{StaticResource TextMuted}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="GreenCombo" TargetType="{x:Type ComboBox}" BasedOn="{StaticResource {x:Type ComboBox}}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        <Setter Property="Background" Value="#0F131C"/>
        <Setter Property="BorderBrush" Value="{StaticResource GreenInputBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="10,4"/>
        <Setter Property="ItemContainerStyle" Value="{StaticResource GreenComboItem}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBox}">
                    <Grid>
                        <Border x:Name="Bd"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="10"
                            SnapsToDevicePixels="True"
                            TextElement.Foreground="{TemplateBinding Foreground}">

                            <DockPanel LastChildFill="True">
                                <!-- arrow -->
                                <ToggleButton x:Name="ToggleButton"
                                          DockPanel.Dock="Right"
                                          Focusable="False"
                                          Width="34"
                                          Background="Transparent"
                                          BorderThickness="0"
                                          ClickMode="Press"
                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                    <Path Data="M 0 0 L 5 5 L 10 0 Z"
                                      Fill="{StaticResource TextMuted}"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                                </ToggleButton>

                                <!-- selected item -->
                                <ContentPresenter Margin="{TemplateBinding Padding}"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Left"
                                              Content="{TemplateBinding SelectionBoxItem}"
                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                              ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                              RecognizesAccessKey="True"/>
                            </DockPanel>
                        </Border>

                        <!-- dropdown -->
                        <Popup x:Name="Popup"
                           Placement="Bottom"
                           IsOpen="{TemplateBinding IsDropDownOpen}"
                           AllowsTransparency="True"
                           Focusable="False"
                           PopupAnimation="Fade">
                            <Border Background="{StaticResource CardBg}"
                                BorderBrush="{StaticResource GreenListBorder}"
                                BorderThickness="1"
                                CornerRadius="10"
                                SnapsToDevicePixels="True"
                                Width="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}">
                                <ScrollViewer Margin="4"
                                          CanContentScroll="True"
                                          VerticalScrollBarVisibility="Auto">
                                    <ItemsPresenter/>
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.6"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource GreenCardBorderStrong}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <!-- ===== ListBox defaults ===== -->
    <Style TargetType="{x:Type ListBox}">
        <Setter Property="Background" Value="#0F131C"/>
        <Setter Property="BorderBrush" Value="#2A3246"/>
        <Setter Property="BorderThickness" Value="1"/>
    </Style>

    <!-- MainWindow listbox style (background #FF222E2F + green gradient border) -->
    <Style x:Key="GreenList" TargetType="{x:Type ListBox}" BasedOn="{StaticResource {x:Type ListBox}}">
        <Setter Property="Background" Value="#FF222E2F"/>
        <Setter Property="BorderBrush" Value="{StaticResource GreenListBorder}"/>
    </Style>

    <!-- ===== CheckBox ===== -->
    <Style TargetType="{x:Type CheckBox}">
        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        <Setter Property="Margin" Value="0,6,0,0"/>
    </Style>

</ResourceDictionary>
