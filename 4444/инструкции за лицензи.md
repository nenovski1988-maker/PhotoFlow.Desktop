# **PhotoFlow — Генериране на лиценз за клиент (стъпки)**

0\) Какво ти трябва



PowerShell 7



Скрипт:

*C:\\Users\\miro\\Documents\\GitHub\\photoflow-installer\\tools\\New-PhotoFlowLicense.ps1*



Private key (DER/PEM):

*C:\\Users\\miro\\Documents\\PhotoFlow\\LicensingKeys\\photoflow\_lic\_private.key*



1\) Отвори PowerShell и влез в папката tools

*cd "$env:USERPROFILE\\Documents\\GitHub\\photoflow-installer\\tools"*



2\) Сетни пътищата (правиш го веднъж за сесията)

*$priv = "$env:USERPROFILE\\Documents\\PhotoFlow\\LicensingKeys\\photoflow\_lic\_private.key"*

*$licDir = "$env:USERPROFILE\\Documents\\PhotoFlow\\Licenses"*

*New-Item -ItemType Directory -Force -Path $licDir | Out-Null*



3\) **Генерирай “MONTHLY” лиценз (пример)**

Клиент 1

*.\\New-PhotoFlowLicense.ps1 `*

  *-Customer "Client LTD" `*

  *-Seats 5 `*

  *-Type "MONTHLY" `*

  *-Days 30 `*

  *-PrivateKeyPath $priv `*

  *-OutPath (Join-Path $licDir "photoflow.license.json") `*

  *-WriteCustomerCopy*



Клиент 2



⚠️ Важно: OutPath винаги е photoflow.license.json (това е файлът, който приложението търси).

-WriteCustomerCopy прави второ копие с името на клиента.



*.\\New-PhotoFlowLicense.ps1 `*

  *-Customer "Studio ABC" `*

  *-Seats 10 `*

  *-Type "MONTHLY" `*

  *-Days 30 `*

  *-PrivateKeyPath $priv `*

  *-OutPath (Join-Path $licDir "photoflow.license.json") `*

  *-WriteCustomerCopy*





След всяко пускане ще имаш:



...\\Licenses\\photoflow.license.json (активният файл)



...\\Licenses\\photoflow.<Customer>.license.json (архив/за пращане)



**4) Ако искаш “TRIAL” (3 дни)**

*.\\New-PhotoFlowLicense.ps1 `*

  *-Customer "Trial Client" `*

  *-Seats 1 `*

  *-Type "TRIAL" `*

  *-PrivateKeyPath $priv `*

  *-OutPath (Join-Path $licDir "photoflow.license.json") `*

  *-WriteCustomerCopy*



5\) Какво пращаш на клиента



Клиентът трябва да получи само license JSON файла и да го сложи тук:



%USERPROFILE%\\Documents\\PhotoFlow\\Licenses\\photoflow.license.json



Най-лесно:



Изпращаш му photoflow.<Customer>.license.json



Той го преименува на photoflow.license.json



Поставя го в папката Documents\\PhotoFlow\\Licenses\\



Стартира приложението



6\) Бърза проверка кои лицензи имаш

Get-ChildItem "$env:USERPROFILE\\Documents\\PhotoFlow\\Licenses" -Filter "photoflow\*.license.json" | Select Name, LastWriteTime



**7) Ако днес правиш много лицензи (супер бързо)**



Пример: 2 клиента с различни seats, автоматично ще се запишат като отделни файлове:



*$clients = @(*

  *@{ Customer="Client LTD"; Seats=5;  Type="MONTHLY"; Days=30 },*

  *@{ Customer="Studio ABC"; Seats=10; Type="MONTHLY"; Days=30 }*

*)*



*foreach ($c in $clients) {*

  *.\\New-PhotoFlowLicense.ps1 `*

    *-Customer $c.Customer `*

    *-Seats $c.Seats `*

    *-Type $c.Type `*

    *-Days $c.Days `*

    *-PrivateKeyPath $priv `*

    *-OutPath (Join-Path $licDir "photoflow.license.json") `*

    *-WriteCustomerCopy*

*}*





Ако искаш следващото подобрение: да генерираш пакет за клиента (zip) с готово име + инструкции вътре, за да няма “къде се копира” и “как се преименува”.

